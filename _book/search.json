[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "",
    "text": "1 MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  },
  {
    "objectID": "index.html#introduction",
    "href": "index.html#introduction",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "1.1 INTRODUCTION",
    "text": "1.1 INTRODUCTION\nEn 2017, AgroParisTech signe l’Appel de Jussieu. Cet appel a été rédigé dans l’objectif de mettre en avant des engagements pour promouvoir la Bibliodiversité. La bibliodiversité correspond à la diversité dans le monde éditorial afin d’éviter une appropriation des espaces de ventes par des grands groupes éditeurs. Dans la continuité de la signature de l’Appel de Jussieu, AgroParisTech en partenariat avec INRAE, a adopté en 2020, une politique d’établissement dédié à la science ouverte (AgroParisTech (2024) , voir : La science ouverte à AgroParisTech – Politique d’établissement janvier 2020). Pour AgroParisTech, la science ouverte correspond à l’ « ensemble des principes et des actions qui facilitent l’ouverture et la libre dissémination, à destination de l’ensemble de la société, des productions de la recherche scientifique, ainsi que la transparence et l’ouverture des processus de la recherche » (AgroParisTech (2024)) . Un exemple concret des principes appliqués par l’établissement sont les principes FAIR pour la gestion des données de recherches. Ces derniers stipulent que les données doivent être :\n\nFindable : facilement trouvable.\nAccessible : avec des conditions d’accès clairement définies.\nInteroperable : intégrable et capable d’interagir avec d’autres outils extérieurs ou données.\nReusable : réutilisables, avec toutes les informations nécessaires à la compréhension de ces dernières et au cadre d’utilisation autorisé par les auteurs.\n\nAfin de progresser vers l’accomplissement des objectifs énoncés par AgroParisTech, de nombreuses actions ont été mises en place. Notamment, la création, le 2 janvier 2023, d’une cellule HAL au sein de l’établissement. Cette cellule HAL est dirigée par la Direction de la Recherche, de l’Innovation et du Transfert Technologique et par la Direction de la Documentation et du Patrimoine Culturelle. La cellule a pour vocation à faciliter l’intégration de l’archive ouverte HAL et des services associés dans la communauté de recherche d’AgroParisTech. Elle assure et veille à la qualité des métadonnées et référentiels pour le portail HAL-AgroParisTech (AgroParisTech (2024) , voir : Cellule HAL d’AgroParisTech Missions et Services). HAL est « l’archive nationale choisie par la communauté scientifique et universitaire française pour la diffusion ouverte de ses résultats de recherche. » (Comité d’orientation du CCSD & Assemblée des partenaires HAL (2022)). HAL dispose d’un API (Application Programming Interface) complexe et très diverse. Ce dernier est un programme permettant à d’autres applications comme Rstudio de communiquer et d’échanger des données avec HAL. L’API HAL offre de nombreux choix spécifiques dans l’extraction de données et dans l’analyse statistique de ces données. La construction d’une requête permettant la récupération de données HAL spécifiés par le constructeur de la requête passe par la connaissance de cet API. Une explication plus détaillée de cet API et d’une requête HAL sera faite dans la section méthode.\nBien qu’il existe des outils d’extraction de publications HAL et de création de rapport bibliographique en ligne comme ExtrHAL (LJonchere (n.d.)), il n’existe pas aujourd’hui de package R permettant d’extraire ces données et de réaliser des analyses statistiques sur ces dernières. C’est pourquoi en réponse à un besoin de l’unité MIA du partenariat entre AgroParisTech et INRAE, Théodore Vanrengterghem, ingénieur de recherche, s’est lancé dans la programmation d’un package R nommé “ManagHAL” réalisant l’extraction de donnée HAL et la création d’un bilan bibliographique.\nR est un langage de programmation gratuit et en open-source, qui a été conçu pour réaliser des analyses statistiques et manipuler des données. Rstudio, est l’environnement de programmation gratuit utilisant le langage R. Dans Rstudio, il existe la possibilité de télécharger des packages. Ces derniers sont des fichiers contenant des fonctions et des données qui partagent un même thème. Ils sont très utilisés par les utilisateurs de Rstudio car les packages facilitent le développement. Il existe actuellement plus de 18000 packages en ligne.\nDurant les 2 mois et 17 jours de mon stage, j’ai eu la chance d’être accueilli au sein du département Modélisation Mathématiques, Informatique, et Physique d’AgroParisTech Palaiseau dans l’unité de recherche Mathématiques et Informatiques Appliquées. Cette unité MIA est le résultat de la collaboration entre AgroParisTech et INRAE, J’ai eu l’opportunité d’être encadré par deux tuteurs nommés Julie Albert et Pierre Barbillon qui m’ont accompagné tout au long de cette expérience. L’unité Mathématiques et Informatiques Appliquées est composée de nombreux chercheurs, doctorants et stagiaire, et est hébergé au sein du bâtiment E d’AgroParisTech Palaiseau. J’ai travaillé sur l’adaptation, la programmation, et l’intégration d’outils de constructions de réseau, et d’outils d’analyse statistiques de réseau au package ManagHAL. J’ai donc pu travailler à la mise en forme du package, à la création de fonctions. Mon stage était financé par la Direction de la Recherche, de l’Innovation et du Transfert Technologique de la cellule HAL d’AgroParisTech présenté dans les paragraphes précédents.\nAfin de comprendre les choix que j’ai réalisé lors du développement du package, il est nécessaire de présenter le package d’origine avant mes modifications. Un point rapide sera fait au cours de la partie contexte statistique sur les réseaux et les méthodes d’analyse statistique de réseau que j’ai utilisé. Le package “ManagHAL” contenait des fichiers essentiels dans la construction d’un package R tel que buildRignore par exemple (contenant la liste des fichiers à ignorer lors de la construction du package sur l’ordinateur de l’utilisateur). Il contenait aussi des scripts R (i.e. files/fichiers) de fonctions contenant les fonctions principales du package. Celles-ci permettent de récupérer toutes les publications associées à un unique ou à des multiples identifiants d’auteurs HAL, provenant d’un fichier tabulé d’identifiants fournie par les ressources humaines. Lors de la récupération, il est possible de spécifier les données bilbiographiques des publications à récupérer. Ces dernières se présentent sous le format d’un fichier csv. Certaines de ces fonctions permettaient aussi de créer un rapport bibliographique automatique en ne donnant en entrée uniquement un identifiant auteur. Il existait des fonctions utiles au développement du package, afin de nettoyer mes données. Prenons par exemple “BorneDate” qui remplace les valeurs manquantes dans un vecteur de dates par une date limite spécifiée. Enfin, des fonctions permettaient réaliser des figures à partir des données des publications récupérés depuis HAL tel que des wordclouds ou des graphes.\nParagraphe précédent ne me convient pas, je vais le retravailler !!!\nLa finalité du package “ManagHAL” est de faciliter l’utilisation et la compréhension des données de publications. Afin de manipuler les données de publications et comprendre celles-ci, l’approche adoptée est de réaliser des réseaux et ensuite d’utiliser des outils d’analyse statistique de réseau. Les outils principaux utilisés à l’avenir dans “ManagHAL” seront les modélisations en blocs stochastiques ou latents. Mon mémoire est organisé de la manière suivante: En premier lieu, le contexte statistique nécessaire à la compréhension des outils utilisés est présenté. Puis, dans la partie suivante sont abordés, les méthodes informatiques développées et les résultats d’analyse de données-exemples obtenus. (pour lequel tout marche, précisez que je fais ça pcq mon stage n’est pas terminé). Dans un troisième temps, les méthodes déjà publiées utilisées sont précisées. Enfin, dans une ultime partie, les résultats sont discutés.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  },
  {
    "objectID": "index.html#contexte-statistique",
    "href": "index.html#contexte-statistique",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "1.2 CONTEXTE STATISTIQUE",
    "text": "1.2 CONTEXTE STATISTIQUE\nCette partie est principalement basée sur la publication “Using Latent Block Models to Detect Structure in Ecological Networks” Aubert et al. (2022)\nUn réseau d’interaction est composé de nœuds (les entités) et d’arêtes (les liens entre ces entités). Toutes entités nommables peuvent être modèlisés sous forme de noeuds, et leur interactions entre elles peuent être modélisés par des arrêtes. On peut prendre pour exemple les réseaux de gènes à partir de données de co-expression. Les réseaux sont répartis en deux groupes principaux: les réseaux Unipartites, où tous les nœuds sont du même type, et les réseaux Bipartites, où il y a deux types distincts de nœuds et les liens ne se forme qu’entre des nœuds de types différents. Les interactions dans un réseau peuvent être binaires ou pondérées. Un réseau peut être encodé dans une matrice \\(Y\\) d’adjacence telle que :\n\\[\\begin{align*}\nY_{ij} \\neq 0 & \\quad \\text{si un lien existe entre les nœuds } i \\text{ et } j, \\\\\nY_{ij} = 0 & \\quad \\text{si aucun lien n'existe entre les nœuds } i \\text{ et } j.\n\\end{align*}\\]\nVous trouverez ci-dessous des exemples de code R pour créer et visualiser des réseaux unipartite et bipartite.\n\n# Création d'un réseau unipartite\nset.seed(42) # Pour la reproductibilité \nunipartite &lt;- erdos.renyi.game(10, 0.3)\n# unipartite_graph &lt;- plot(unipartite, main = \"Réseau Unipartite\", width = 800, height = 600)\n# print(unipartite_graph)\nmatrice_adjacence_unipartite &lt;- as.matrix(unipartite, \"adjacency\")\n\n# Création d'un réseau bipartite\n# Noms des nœuds\nnodes_A &lt;- c(\"A1\", \"A2\", \"A3\")\nnodes_B &lt;- c(\"B1\", \"B2\", \"B3\", \"B4\")\n# Liste des arêtes\nedges &lt;- c(\"A1\", \"B1\", \"A1\", \"B2\",\"A2\", \"B1\", \"A2\", \"B2\", \"A2\", \"B3\", \"A3\", \"B2\", \"A3\", \"B4\")\n# Création du graphe\nbipartite &lt;- graph(edges, directed = FALSE)\nV(bipartite)$type &lt;- bipartite_mapping(bipartite)$type\nplot(bipartite, layout = layout_as_bipartite, vertex.color = c(\"skyblue\", \"salmon\")[V(bipartite)$type + 1],\n     vertex.label.color = \"black\", vertex.shape = \"circle\", vertex.size = 30, edge.width = 2, main = \"Réseau Bipartite\")\nmatrice_adjacence_bipartite &lt;- as.matrix(bipartite, \"adjacency\")\n\n \nmettre une légende avec titre important !!!\nNous décrivons les noeuds d’un réseau comme : \\(V = { 1,..,N }\\) , (\\(N\\) correspond à la taille du réseau). Les arrêtes peuvent être décrit comme \\(E = ...\\) .\nIl existe plusieurs approches différentes pour analyser la structure d’un réseau. Dans ce mémoire, une seule approche sera considérée. Elle suppose l’existence de groupe fonctionnels partageant un même patron de connexion. Nous nous baserons par la suite sur une méthode possible pour cette approche: les modèles probabilistes génératifs.\nLes Modèles en Bloc Stochastiques (aussi appelé SBM) sont des modèles probabilistes. Ils supposent que les nœuds d’un même réseau sont divisés en blocs (groupe, clusters) latents regroupant les entités ayant des modèles de connectivité similaires. Latents signifie qu’il n’y a pas d’apriori sur le type de structure recherchée. Ces modèles sont utiles pour détecter les communautés, les clusters aux sein d’un réseau complexe. Pour réaliser un modèle en bloc stochastique, il est nécessaire de supposer que le réseau obtenu à partir de mes données est une réalisation de mon modèle.\nLes noeuds sont partitionnés en \\(K\\) groupes latents. On définit un vecteur \\(Z\\) où \\(Zi = k\\) , \\(k\\) est le bloc auquel appartient le noeud \\(i\\) . Dans le cas d’un réseau unipartite, on définit :\n\n\\(P(Zi = k) = \\pi_k\\) , comme la probabilité d’appartenance au groupe \\(k\\).\n\\(P(Y_{ij} = 1 | Z_i = k, Z_j = k') = \\gamma_{kk'}\\) , comme la probabilité pour une paire de noeuds appartenant à un bloc \\(k\\) et à un bloc \\(k'\\) d’être en interaction (dans le cas binaire).\n\nNous avons donc comme paramètres du modèle \\(\\theta = (\\gamma, \\pi)\\). A partir du réseau connu, il est possible d’inférer les paramètres du modèle. Par nécessité d’écourter le rapport, une explication détaillée ne sera pas réalisée. Je vous conseille cependant d’aller voir la publication “Using Latent Block Models to Detect Structure in Ecological Networks” Aubert et al. (2022) où les explications à ce propos sont claires et précises.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  },
  {
    "objectID": "index.html#methodes",
    "href": "index.html#methodes",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "1.3 METHODES",
    "text": "1.3 METHODES\nComme précisé dans l’introduction, l’entièreté des méthodes informatiques développées ont été réalisées sur RStudio en utilisant le langage R version 4.4.1 sous windows 11 x64. Les packages utilisés sont les suivants :\nLe package dplyr (Wickham et al. 2023) est utilisé pour la manipulation et la transformation des données grâce à une syntaxe claire et cohérente. Ce package facilite les opérations courantes telles que la sélection, le filtrage, le regroupement et le résumé des données. Le package mailR (Premraj 2021) est utilisé pour l’envoi d’emails avec des pièces jointes directement depuis R, ce qui est utile pour automatiser l’envoi de rapports. Le package askpass (Ooms 2023) est utilisé pour gérer les mots de passe de manière sécurisée. Le package furrr (Vaughan and Dancho 2022) est utilisé pour paralléliser les tâches en combinaison avec le package future (Bengtsson 2021). Le package future (Bengtsson 2021) permet l’exécution de code en parallèle, ce qui réduit le temps de traitement des tâches lourdes. Le package ggplot2 (Wickham 2016) est utilisé pour la création de visualisations graphiques sophistiquées. Le package matgrittr (Bache and Wickham 2022) fournit des opérateurs pour améliorer la lisibilité du code, en particulier l’opérateur %&gt;% (pipe). Le package purrr (Wickham and Henry 2023) est utilisé pour les opérations fonctionnelles sur les listes et autres structures de données. Le package quarto (Allaire and Dervieux 2024) est utilisé pour la création de documents dynamiques et de rapports. Le package readxl (Wickham and Bryan 2023) permet la lecture de fichiers Excel. Le package rvest (Wickham 2024) est utilisé pour le web scraping, c’est-à-dire l’extraction de données à partir de pages web. Le package SnowballC (Bouchet-Valat 2023) est utilisé pour le traitement de la langue naturelle, en particulier pour la lemmatisation. Le package stringr (Wickham 2023) fournit des fonctions pour la manipulation des chaînes de caractères. Le package tictoc (Izrailev 2024) est utilisé pour mesurer le temps d’exécution des morceaux de code. Le package tm (Feinerer and Hornik 2024) est utilisé pour le text mining (extraction de connaissances à partir de textes). Le package wordcloud (Fellows 2018) est utilisé pour la création de nuages de mots. Le package Visnetwork [la citation ne fonctionne pas] est utilisé pour la visualisation de réseaux dynamiques. Le package Sbm (Chiquet, Donnet, and Barbillon 2024) est utilisé pour réaliser les analyses statisitiques de réseaux.\nAfin de pouvoir construire une requête HAL pour récupèrer des données bibliographiques de publications d’auteurs, il est nécessaire de comprendre comment construire une requête. Pour construire une requête HAL, il faut au moins un paramètre q qui contient la requête de recherche. Ce paramètre doit spécifier le champ de recherche suivi de la valeur. Par exemple, pour rechercher le terme “test” : http://api.archives-ouvertes.fr/search/?q=test&wt=xml . Si le champ n’est pas spécifié, la recherche s’effectue par défaut dans l’index texte. Pour rechercher dans un champ particulier, il faut utiliser champ:terme : http://api.archives-ouvertes.fr/search/?q=title_t:japon&wt=xml . Pour échapper certains caractères spéciaux utilisés par Apache Solr, utilisez \\. Par exemple, (1+1):2 devient \\(1\\+1\\)\\:2. (voir “Documentation API-HAL” (n.d.)). Il est possible d’indiquer le format de la réponse (sous-entendant le format des données récupérées) via le paramètre wt . Pour finir il est possible de spécifier les champs à retourner dans la réponse via le paramètre fl et de faire un filtre des données via le paramètre fq . Tous les possibilités de l’API HAL n’ont pas été abordé dans ce court résumé. Il est pourtant compréhensible que l’API HAL est très diverse et permet une grande liberté à l’utilisateur pour l’extraction des données. De plus, il existe un nombre de champs considérables. Certains seront abordés par la suite dans la section résultats.\nPour finir, l’entièreté du stage s’est inscrit dans une dynamique de développement et d’intégration continue via la forge gitlab d’AgroParisTech. La forge gitLab MIA, du partenariat INRAE et AgroParisTech, est un logiciel DevOps passant par le language Git. Git est un système de controle, de versionnage du code des dévéloppeurs gratuit et open source. Il permet à plusieurs développeurs de travailler sur un code sur un même dépot et d’avancer ensemble par le biais de “merge”. “Merge” siginife que la personne modifiant un fichier contenant du code pousse en ligne sur le depot partagé , les modifications réalisées.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  },
  {
    "objectID": "index.html#resultats",
    "href": "index.html#resultats",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "1.4 RESULTATS",
    "text": "1.4 RESULTATS\nCette section présente les résultats obtenus au cours de mon stage. Elle est divisée en deux parties principales: les fonctions et algorithmes développés, modifiés ainsi que les résultats obtenus via un exemple. Cet exemple consistera en des données provenant des Ressources Humaines du Laboratoire MIA d’AgroPariTech. Chaque fonction est expliquée en détail, suivie des raisons justifiant son développement. Il est important de noter que mon stage se terminant le 26 juillet, Le package est donc encore en développement. Les fonctions présentées fonctionnent dans le cadre de l’exemple. Dans cette section, les noms de fonctions seront en italique et les noms des scripts R contenant les fonctions seront en gras.\n\n1.4.1 Accessibilité et généricité de ManagHAL\nLors de mon stage, j’ai d’abord décidé de rendre le package plus accessible et générique. Pour ce faire, il m’était nécessaire de réorganiser et modifier certaines fonctions déjà présentes codées par Théodore Vanrengterghem.\n\n1.4.1.1 Modifications de la fonction load_mia_table\nJ’ai commencé par modifier dans le fichier mia_table.R la fonction load_mia_table. A l’origine, cette fonction permettait le chargement d’un csv en ligne depuis une addresse spécifique vers un fichier contenant des informations tel que le nom, le prenom, l’idhal, l’equipe, etc, des personnes appartenant au labo. J’ai fait le choix de renommer le fichier load_table.R. J’ai remplacé la fonction load_mia_table par trois fonctions load_team_table_csv, load_team_table_url, et load_team_table. load_team_table_csv permet de charger un csv dans Rstudio depuis un fichier local de la machine de l’utilisateur. load_team_table_url permet de charger un csv dans Rstudio depuis un fichier en ligne. load_team_table fait appel aux deux fonctions précédentes et permet par le biais d’argument de fonctions de spécifier la provenance du fichier et de charger le csv soit depuis un url soit depuis un fichier local. J’ai aussi modifier la majorité des fonctions déjà présentes dans le package faisant appel à load_mia_table. Les paramètres en entrée des trois fonctions sont les même que la fonction load_mia_table d’origine avec l’ajout d’un paramètre permettant à l’utilisateur de rentrer l’adresse du fichier. J’ai ensuite crée une documentation via le package “Roxygène2” conforme aux critères requis pour un package mis en ligne (veuillez vous referez à l’annexe : Exemple d’une documentation classique avec Roxygen2 ) pour chacune des trois fonctions.\nLa fonction originelle load_mia_table ne permettait que de charger de manière spécifique le csv fourni par les Ressources Humaines depuis un url seafile. Cette fonction n’était pas générique. Ainsi, il était nécéssaire de la modifier. J’ai décidé de diviser en trois fonctions différentes afin de permettre à l’utilisateur de choisir de charger des tables de provenance locale ou depuis internet. J’ai décidé pour load_team_table_url de garder en majeur partie le code d’origine et de simplement le réadapter par soucis de temps. J’y ai ajouté des conditions de présence de colonnes obligatoires afin d’obliger l’utilisateur à fournir des colonnes sous un format spécifique. (Pour voir le corps de la fonction, veuillez vous référer à l’annexe : load_team_table_url)\nload_team_table_csv est basé sur la construction de load_team_table_url. Je l’ai adapté pour pouvoir charger depuis un fichier local en utilisant read.csv. De même que dans load_team_table_url, j’y ai ajouté des conditions de présence de colonnes obligatoires afin d’obliger l’utilisateur à fournir des colonnes sous un format spécifique. (Pour voir le corps de la fonction, veuillez vous référer à l’annexe : load_team_table_csv)\nEnfin, load_team_table appelle l’une des deux fonctions en fonction du type d’adresse fourni : URL ou chemin de fichier local. Le type de l’adresse est déterminé en utilisant grepl, qui utilise une expression régulière. (Pour voir le corps de la fonction, veuillez vous référer à l’annexe : load_team_table)\n\n\n1.4.1.2 Résultat de l’Application de load_team_table\n\ndata_RH_csv_Example &lt;- load_team_table(filter_id = TRUE, date_cols = c(6,7), filepath_or_url = \"./data/Data_RH_Example.csv\")\n# afin de ne garder que les lignes avec un idhal correct\ndata_RH_csv_Example &lt;- data_RH_csv_Example[which(!is.na(data_RH_csv_Example$idhal)),]\nhead(data_RH_csv_Example)\n\n  civilite       nom prenom statut  rattachement debut_contrat fin_contrat\n1       M. ADJAKOSSA   Éric    CEC AgroParisTech                          \n6      Mme    AUBERT  Julie     IR         INRAE                          \n8       M. BARBILLON Pierre     PR AgroParisTech                          \n  financement  equipe  unite               orcid  idhal\n1             SOLsTIS MIA PS 0000-0002-5280-0347 749339\n6             SOLsTIS MIA PS 0000-0001-5203-5748  15356\n8             SOLsTIS MIA PS 0000-0002-7766-7693  16750\n                       adresse_mail\n1   eric-houngla.adjakossa@inrae.fr\n6             julie.aubert@inrae.fr\n8 Pierre.Barbillon@Agroparistech.fr\n\n\nLors de l’application de la fonction load_team_table ci-dessus en utilisant le jeu de données test Data_RH_Example, on observe le chargement d’un csv contenant les colonnes d’origines du csv fournie en entrée. Les valeurs manquantes ou mal renseignées des idhals numériques ont été remplacées par des NAs. Les dates présentes deans les colonnes de dates spécifiés par l’utilisateur ont été nettoyées et ont le bon format.\n\n\n1.4.1.3 Modifications des fonctions régissant la requête HAL\nDans le package managHAL originel, il y avait deux fichiers contenant les fonctions nécéssaires à la construction d’une requête HAL. Ces deux fichiers se nomment HAL_reports.R et HAL_queries.R. La fonction principale de construction d’une requête HAL est HAL_query. Elle prend en entrée différents paramètres et construit une url correspondant à une requête HAL. Ces différents paramètres définissent les différents champs, filtres, sorties demandées de la requête. Les champs de sortie ne convenant pas et manquait d’information pour la construction d’un réseau. Ainsi, après réflexion et discussion avec mes tuteurs Julie Aubert et Pierre Barbillon, j’ai modifié les différents champs de sorties afin d’obtenir les données nécessaires et essentielles à la construction d’un réseau. Par exemple, le champ ‘authFullNamePersonIDIDHal_fs’ permet de spécifier à HAL_query de récupérer les noms et les identifiants HAL numériques des autheurs d’une même publication. Le paramètre add_output ajouté par Théodore Vanrengterghem dans la fonction d’origine permet à l’utilisateur de rentrer des champs de sortie spécifiques en plus. Ce paramètre a été beaucoup utilisé au cours de ce stage dans la création de fonction permettant la création de réseau.\nLa fonction d’origine ne créer pas d’url d’une page permettant de récupérer les publications autres qu’à partir d’identifiants numériques d’auteurs, j’ai modifié les paramètres d’entrée et le corps de la fonction afin que l’utilisateur puissent spécifier si les identifiants fournis sont des identifiants de structures ou des identifiants de personnes. La nouvelle fonction HAL_query créer donc un url qui peut donc récupérer au choix de l’utilisateur une liste de publications associés à une structure via son identifiant ou une liste de publications associés à un identifiant numérique. (Pour voir le corps de la fonction, veuillez vous référer à l’annexe : HAL_query)\nPlusieurs fonctions présentes avant mes modifications faisait appel à HAL_query. Ces dernières comme HAL_extract_csv ont donc été modifiées afin de corespondre à la nouvelle version de HAL_query. De même Les fonctions auquelles fait appel HAL_query ont elles aussi été modifiées pour correspondre à HAL_query. HAL_extract_csv est une fonction récupèrant l’url via HAL_query. Pour montrer les résultats obtenus avec HAL_query, des exemples ci-dessous seront réalisés avec HAL_extract_csv pour une liste d’identifiants numérique d’auteurs et pour un identifiant d’une unité/laboratoire. Il sera ajouté des sorties via le paramètres add_outputs :\n\ndate_min = \"01/01/2022\"\ndate_max = \"01/01/2023\"\n\n# Publications à partir d'un id de laboratoire.\nHAL_publis_Labo &lt;- managHAL::HAL_extract_csv(id = 1002311, date_min,date_max, type_id = \"struct_id\", add_output = c(\"structAcronym_s\",\"structId_i\", \"structHasAlphaAuthIdHalPersonid_fs\"))\nHAL_publis_Labo[1,]\n\n    docid      halId_s version_i docType_s\n1 4440523 hal-04440523         1      COMM\n                                                                                                                                                                                                                                                                                                                                                                         citationFull_s\n1 Isabelle Lebert, Maxime Rates, Julien Pradel, Laure Mathews-Martin, Aurore Latour, et al.. Evaluation du risque d’exposition aux tiques et aux agents de la maladie de Lyme dans les espaces verts de la région lyonnaise : résultats de la surveillance 2019-2023. Colloque final de restitution du projet Biodiversa-Bioroddi, Nov 2023, Lyon (Sciences Po), France. ⟨hal-04440523⟩\n                                                                                      citationRef_s\n1 Colloque final de restitution du projet Biodiversa-Bioroddi, Nov 2023, Lyon (Sciences Po), France\n  publicationDate_tdate\n1  2023-01-01T00:00:00Z\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    authFullNamePersonIDIDHal_fs\n1 Isabelle Lebert_FacetSep_184610_FacetSep_isabelle-lebert,Maxime Rates_FacetSep_749136_FacetSep_maxime-rates,Julien Pradel_FacetSep_1284695_FacetSep_,Laure Mathews-Martin_FacetSep_1310514_FacetSep_,Aurore Latour_FacetSep_0_FacetSep_,Maximilien Barbier_FacetSep_0_FacetSep_,Gwenaël Vourc’h_FacetSep_736823_FacetSep_gwenael-vourch,Valerie Poux_FacetSep_744163_FacetSep_valerie-poux,Séverine Barry_FacetSep_744034_FacetSep_severine-barry,Sébastien Masseglia_FacetSep_744051_FacetSep_sebastien-masseglia,Severine Bord_FacetSep_180861_FacetSep_severine-bord,Karine Chalvet-Monfray_FacetSep_743281_FacetSep_karine-chalvet-monfray,Diana Sepúlveda_FacetSep_0_FacetSep_,Luc Chabanne_FacetSep_754272_FacetSep_luc-chabanne,Nathalie Charbonnel_FacetSep_736426_FacetSep_nathalie-charbonnel,Magalie René-Martellet_FacetSep_744046_FacetSep_magalie-rene-martellet\n                                                                                               structAcronym_s\n1 UMR EPIA,VAS,INRAE,UMR CBGP,Cirad,IRD [France-Sud],INRAE,Institut Agro,UM,LRFSN,ANSES,MIA Paris-Saclay,INRAE\n                                                                                                                            structId_i\n1 1002382,301767,577435,1100832,11574,451860,577435,1096330,1042499,1100589,561191,301715,1002311,148117,419361,577435,1056557,1031275\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             structHasAlphaAuthIdHalPersonid_fs\n1 L_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_isabelle-lebert_FacetSep_184610_FacetSep_Lebert Isabelle,L_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_isabelle-lebert_FacetSep_184610_FacetSep_Lebert Isabelle,L_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_isabelle-lebert_FacetSep_184610_FacetSep_Lebert Isabelle,R_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_maxime-rates_FacetSep_749136_FacetSep_Rates Maxime,R_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_maxime-rates_FacetSep_749136_FacetSep_Rates Maxime,R_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_maxime-rates_FacetSep_749136_FacetSep_Rates Maxime,P_AlphaSep_1100832_FacetSep_Centre de Biologie pour la Gestion des Populations_JoinSep__FacetSep_1284695_FacetSep_Pradel Julien,P_AlphaSep_11574_FacetSep_Centre de Coopération Internationale en Recherche Agronomique pour le Développement_JoinSep__FacetSep_1284695_FacetSep_Pradel Julien,P_AlphaSep_451860_FacetSep_Institut de Recherche pour le Développement_JoinSep__FacetSep_1284695_FacetSep_Pradel Julien,P_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep__FacetSep_1284695_FacetSep_Pradel Julien,P_AlphaSep_1096330_FacetSep_Institut Agro Montpellier_JoinSep__FacetSep_1284695_FacetSep_Pradel Julien,P_AlphaSep_1042499_FacetSep_Institut national d'enseignement supérieur pour l'agriculture\\\\, l'alimentation et l'environnement_JoinSep__FacetSep_1284695_FacetSep_Pradel Julien,P_AlphaSep_1100589_FacetSep_Université de Montpellier_JoinSep__FacetSep_1284695_FacetSep_Pradel Julien,M_AlphaSep_561191_FacetSep_Laboratoire de la rage et de la faune sauvage de Nancy_JoinSep__FacetSep_1310514_FacetSep_Mathews-Martin Laure,M_AlphaSep_301715_FacetSep_Agence nationale de sécurité sanitaire de l'alimentation\\\\, de l'environnement et du travail_JoinSep__FacetSep_1310514_FacetSep_Mathews-Martin Laure,L_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep__FacetSep_0_FacetSep_Latour Aurore,L_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep__FacetSep_0_FacetSep_Latour Aurore,L_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep__FacetSep_0_FacetSep_Latour Aurore,B_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep__FacetSep_0_FacetSep_Barbier Maximilien,B_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep__FacetSep_0_FacetSep_Barbier Maximilien,B_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep__FacetSep_0_FacetSep_Barbier Maximilien,V_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_gwenael-vourch_FacetSep_736823_FacetSep_Vourc’h Gwenaël,V_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_gwenael-vourch_FacetSep_736823_FacetSep_Vourc’h Gwenaël,V_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_gwenael-vourch_FacetSep_736823_FacetSep_Vourc’h Gwenaël,P_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_valerie-poux_FacetSep_744163_FacetSep_Poux Valerie,P_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_valerie-poux_FacetSep_744163_FacetSep_Poux Valerie,P_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_valerie-poux_FacetSep_744163_FacetSep_Poux Valerie,B_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_severine-barry_FacetSep_744034_FacetSep_Barry Séverine,B_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_severine-barry_FacetSep_744034_FacetSep_Barry Séverine,B_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_severine-barry_FacetSep_744034_FacetSep_Barry Séverine,M_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_sebastien-masseglia_FacetSep_744051_FacetSep_Masseglia Sébastien,M_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_sebastien-masseglia_FacetSep_744051_FacetSep_Masseglia Sébastien,M_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_sebastien-masseglia_FacetSep_744051_FacetSep_Masseglia Sébastien,B_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_severine-bord_FacetSep_180861_FacetSep_Bord Severine,B_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_severine-bord_FacetSep_180861_FacetSep_Bord Severine,B_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_severine-bord_FacetSep_180861_FacetSep_Bord Severine,B_AlphaSep_1002311_FacetSep_Mathématiques et Informatique Appliquées_JoinSep_severine-bord_FacetSep_180861_FacetSep_Bord Severine,B_AlphaSep_148117_FacetSep_AgroParisTech_JoinSep_severine-bord_FacetSep_180861_FacetSep_Bord Severine,B_AlphaSep_419361_FacetSep_Université Paris-Saclay_JoinSep_severine-bord_FacetSep_180861_FacetSep_Bord Severine,B_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_severine-bord_FacetSep_180861_FacetSep_Bord Severine,C_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_karine-chalvet-monfray_FacetSep_743281_FacetSep_Chalvet-Monfray Karine,C_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_karine-chalvet-monfray_FacetSep_743281_FacetSep_Chalvet-Monfray Karine,C_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_karine-chalvet-monfray_FacetSep_743281_FacetSep_Chalvet-Monfray Karine,S_AlphaSep_1056557_FacetSep_Direction ‑ Écologie Urbaine de la Ville de Lyon_JoinSep__FacetSep_0_FacetSep_Sepúlveda Diana,S_AlphaSep_1031275_FacetSep_Partenaires INRAE_JoinSep__FacetSep_0_FacetSep_Sepúlveda Diana,C_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_luc-chabanne_FacetSep_754272_FacetSep_Chabanne Luc,C_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_luc-chabanne_FacetSep_754272_FacetSep_Chabanne Luc,C_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_luc-chabanne_FacetSep_754272_FacetSep_Chabanne Luc,C_AlphaSep_1100832_FacetSep_Centre de Biologie pour la Gestion des Populations_JoinSep_nathalie-charbonnel_FacetSep_736426_FacetSep_Charbonnel Nathalie,C_AlphaSep_11574_FacetSep_Centre de Coopération Internationale en Recherche Agronomique pour le Développement_JoinSep_nathalie-charbonnel_FacetSep_736426_FacetSep_Charbonnel Nathalie,C_AlphaSep_451860_FacetSep_Institut de Recherche pour le Développement_JoinSep_nathalie-charbonnel_FacetSep_736426_FacetSep_Charbonnel Nathalie,C_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_nathalie-charbonnel_FacetSep_736426_FacetSep_Charbonnel Nathalie,C_AlphaSep_1096330_FacetSep_Institut Agro Montpellier_JoinSep_nathalie-charbonnel_FacetSep_736426_FacetSep_Charbonnel Nathalie,C_AlphaSep_1042499_FacetSep_Institut national d'enseignement supérieur pour l'agriculture\\\\, l'alimentation et l'environnement_JoinSep_nathalie-charbonnel_FacetSep_736426_FacetSep_Charbonnel Nathalie,C_AlphaSep_1100589_FacetSep_Université de Montpellier_JoinSep_nathalie-charbonnel_FacetSep_736426_FacetSep_Charbonnel Nathalie,R_AlphaSep_1002382_FacetSep_Unité Mixte de Recherche d'Épidémiologie des maladies Animales et zoonotiques_JoinSep_magalie-rene-martellet_FacetSep_744046_FacetSep_René-Martellet Magalie,R_AlphaSep_301767_FacetSep_VetAgro Sup - Institut national d'enseignement supérieur et de recherche en alimentation\\\\, santé animale\\\\, sciences agronomiques et de l'environnement_JoinSep_magalie-rene-martellet_FacetSep_744046_FacetSep_René-Martellet Magalie,R_AlphaSep_577435_FacetSep_Institut National de Recherche pour l’Agriculture\\\\, l’Alimentation et l’Environnement_JoinSep_magalie-rene-martellet_FacetSep_744046_FacetSep_René-Martellet Magalie\n\n# Publications à partir d'ids auteurs\nHAL_publis_auteurs &lt;- managHAL::HAL_extract_csv(id = data_RH_csv_Example[,12] , date_min,date_max, type_id = \"person_id\")\nHAL_publis_auteurs[1,]\n\n    docid      halId_s version_i docType_s\n1 4190551 hal-04190551         1       ART\n                                                                                                                                                                                                                                                                                citationFull_s\n1 Emmanuelle Blanc, Jérôme Enjalbert, Timothée Flutre, Pierre Barbillon. Efficient Bayesian automatic calibration of a functional-structural wheat model using an adaptive design and a metamodeling approach. Journal of Experimental Botany, In press, ⟨10.1093/jxb/erad339⟩. ⟨hal-04190551⟩\n                                                    citationRef_s\n1 Journal of Experimental Botany, In press, ⟨10.1093/jxb/erad339⟩\n  publicationDate_tdate\n1  2023-01-01T00:00:00Z\n                                                                                                                                                                                         authFullNamePersonIDIDHal_fs\n1 Emmanuelle Blanc_FacetSep_0_FacetSep_,Jérôme Enjalbert_FacetSep_1169771_FacetSep_jerome-enjalbert,Timothée Flutre_FacetSep_11756_FacetSep_timothee-flutre,Pierre Barbillon_FacetSep_16750_FacetSep_pierre-barbillon\n\n\n\n\n\n1.4.2 Ajout de fonctionnalité à ManagHAL\n\n1.4.2.1 Création d’un réseau de co-auteurs avec Visnetwork\nAfin d’obtenir les informations sous-jacentes des informations bibliographiques, j’ai commencé à travailler à la création d’un réseau de co-auteur. Pour l’instant, la fonctionalité n’existe qu’au format de script R sur un document quarto. Au cours des semaines restantes, l’objectif est de continuer à travailler dessus et créer des fonctions simples et claires permettant à l’utilisateur de créer son propre réseau à partir de ses données. Le script de création de fonction est inspiré d’un script fournie au préalable par ma tutrice Julie Aubert. Des modifications et des ajouts ont été apportés pour améliorer l’extraction, le nettoyage, la construction, et la visualisation des données. Suite à mes modifications et mes ajouts, le script se divise en plusieurs parties ((Pour voir le script R, veuillez vous référer à l’annexe : Script_R_reseau_co-auteur) :\nLa première partie correspond à l’extraction et au nettoyage des données. Les données brutes ont été organisées et nettoyées pour être adaptées à la construction du réseau. Les années de publication ont été extraites et les identifiants des auteurs ont été nettoyés. Les auteurs ont été associés aux structures pertinentes, et les incohérences de noms ou d’identifiants HAL ont été corrigées. Des identifiants fictifs ont été créés pour les auteurs sans identifiant.\nLa deuxième partie concerne la construction et la visualisation du graphe. À partir des données nettoyées, des matrices de contingence ont été créées. Ces matrices ont été converties en listes de nœuds (auteurs) et en listes d’arêtes (collaborations). Les nœuds ont été colorés et groupés en fonction des années de publication, et des légendes ont été ajoutées pour faciliter la compréhension du graphe. Des descriptions supplémentaires ont été intégrées pour enrichir les légendes, et la visualisation finale du réseau a été réalisée via visnetwork.\nIl est possible de voir via l’exemple suivant (obtenu avec le code de l’annexe : Script_R_reseau_co-auteur) qu’un réseau de co-auteurs permet une visualisation claire des collaborations et des périodes d’activité des différents auteurs.\nParler du quarto avec la construction d’un réseau et la création d’un réseau sur un soous groupe puis parler du premier sbm réalisé;\n\n\n\n1.4.3 Conclusion des Résultats\nExemple via chatGPT\nLes méthodes développées au cours de ce stage ont permis d’améliorer significativement les performances des algorithmes existants. L’optimisation de l’algorithme X a réduit le temps de traitement de 40%, tandis que les ajustements apportés au modèle Y ont augmenté la précision de 5%. Ces résultats démontrent l’efficacité des approches choisies pour répondre aux limitations des méthodes précédentes.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  },
  {
    "objectID": "index.html#discussion",
    "href": "index.html#discussion",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "1.5 DISCUSSION",
    "text": "1.5 DISCUSSION\nparler de l’efficacité de ce que j’ai code, des modifications à venir et de ce que je souhaite faire avant la fin de stage. Parler de l’api HAL et du cauchemar que c’est, parler des potentiels utilisations du package pour HAL mais aussi faire un parallèle avec la bio avec par exemple en ouverture les réseaux de gènes ?",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  },
  {
    "objectID": "index.html#annexes",
    "href": "index.html#annexes",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "1.6 ANNEXES",
    "text": "1.6 ANNEXES\n\n1.6.1 load_team_table_url\n\nload_team_table_url &lt;- function(filter_id = TRUE,\n                                date_cols,\n                                url) {\n  idhal &lt;- NULL\n  tmp_file &lt;- paste0(tempfile(), \".xlsx\")\n  download.file(\n    url = url,\n    destfile = tmp_file,\n    mode = \"wb\"\n  )\n  nbcol &lt;- ncol(readxl::read_xlsx(tmp_file,\n                                  sheet = \"Membres\"))\n  col_types &lt;- rep(\"text\",nbcol)\n  col_types[date_cols] &lt;- 'date'\n  \n  \n  table &lt;- readxl::read_xlsx(tmp_file,\n                             sheet = \"Membres\",\n                             col_types = col_types\n  ) %&gt;%\n    dplyr::rename_with(\n      clean_names\n    ) %&gt;%\n    dplyr::mutate_if(function(x) {\n      \"POSIXt\" %in% class(x)\n    }, ~ format(.x, \"%d/%m/%Y\"))\n  \n  \n  if (filter_id) {\n    table &lt;- suppressWarnings(table %&gt;%\n                                dplyr::filter(!is.na(as.numeric(idhal))) %&gt;%\n                                dplyr::mutate(idhal = as.numeric(idhal)))\n  }\n  \n  # Test if there is a column named \"id\"\n  # Possibility to add mandatory columns in the future\n  # Just add \"OR\"\n  if ( !(\"idhal\" %in% names(table)) | !(\"nom\" %in% names(table)) | !(\"prenom\" %in% names(table)) ) { stop(\"one of the following columns are missing : 'idhal' ; 'nom' ; 'prenom' \") }\n  \n  return(table)\n}\n\n\n\n1.6.2 load_team_table_csv\n\nload_team_table_csv &lt;- function(filter_id = TRUE,\n                                date_cols,\n                                filepath){\n  idhal &lt;- NULL\n  \n  # read the csv table  TODO : Add message error to guide user\n  # if sep is different than \";\" \n  # and if header = false\n  nbcol &lt;- ncol(read.csv(filepath, header = TRUE, sep = \";\", encoding = \"UTF-8\"))\n  \n  # define column types (dates or text if not dates)\n  col_types &lt;- rep(\"character\", nbcol)\n  col_types[date_cols] &lt;- 'character'\n  \n  table &lt;- read.csv(filepath,\n                    header = TRUE,\n                    sep = \";\",\n                    encoding = \"UTF-8\",\n                    colClasses = col_types\n  ) %&gt;%\n    dplyr::rename_with(  # clean the columns names \n      clean_names\n    ) %&gt;%\n    dplyr::mutate_if(function(x) {  # Convert specified column to dates\n      \"POSIXt\" %in% class(x)\n    }, ~ format(.x, \"%d/%m/%Y\"))\n  \n  # Filter out rows without IDHAL\n  if (filter_id) {\n    idhal &lt;- table$idhal\n    table &lt;- table[which(!is.na(idhal)),]\n    table$idhal &lt;- as.numeric(idhal)\n    table$idhal[table$idhal == 0] &lt;- NA\n    table &lt;- table[which(!is.na(idhal)),]\n  }\n  \n  # Test if there is a column named \"id\"\n  # Possibility to add mandatory columns in the future\n  # Just add \"OR\"\n  if ( !(\"idhal\" %in% names(table)) | !(\"nom\" %in% names(table)) | !(\"prenom\" %in% names(table)) ) { stop(\"one of the following columns are missing : 'idhal' ; 'nom' ; 'prenom' \") }\n  \n  return(table)\n}\n\n\n\n1.6.3 load_team_table\n\nload_team_table &lt;- function(filter_id = TRUE,\n                            date_cols = c(7,8),\n                            filepath_or_url) {\n  \n  # If the parameter is a URL\n  if (grepl(\"^https?://\", filepath_or_url)) {\n    \n    # Call the load_team_table_url function with the URL\n    return(load_team_table_url(filter_id = filter_id, date_cols = date_cols, url = filepath_or_url))\n  } else {\n    \n    # Otherwise, it's a local file path; call the load_team_table_csv function with the local file path\n    return(load_team_table_csv(filter_id = filter_id, date_cols = date_cols, filepath = filepath_or_url))\n  }\n}\n\n\n\n1.6.4 Exemple d’une documentation classique avec Roxygen2\n\n#' load_team_table_csv\n#'\n#' This function loads a team table from a CSV file, allowing optional filtering \n#' based on the presence of an IDHAL an specifying which columns contain dates.\n#'\n#' @param filter_id erase person without IDHAL (default = TRUE)\n#' @param date_cols positions of dates columns, others will be read as text\n#' @param filepath the file path of the CSV table\n#'\n#' @export\n#'\n#' @importFrom magrittr %&gt;%\n#' @importFrom utils read.csv\n#'\n#' @return a data.frame containing information from team\n#'\n#' @examples\n#' \n#' \\dontrun{\n#' load_team_table_csv(filter_id = TRUE,\n#'                     date_cols = c(7,8),\n#'                     \"C:/users/.../.../Classeur.csv\")\n#' }\n\n\n\n1.6.5 HAL_query\n\nHAL_query &lt;- function(id,\n                      date_min = NULL,\n                      date_max = NULL,\n                      format = c(\"csv\", \"bibtex\", \"json\", \"xml\", \"online\"),\n                      grouped = FALSE,\n                      type_id = c(\"person_id\", \"struct_id\"),\n                      maxrows = 1000,\n                      add_filters = list(),\n                      add_exclusions = list(\n                        status_i = 111,\n                        instance_s = c(\"sfo\", \"dumas\", \"memsic\", \"hceres\")\n                      ),\n                      add_outputs = character(0),\n                      sorted_by = c(\"producedDate_tdate\", \"desc\"),\n                      thesis_strict = T) {\n  \n  # ----- DEFAULT PARAM -------------------------------------------------------\n  online &lt;- format[[1]] == \"online\"\n  outputs &lt;- c(\n    \"docid\", \"halId_s\", \"version_i\", \"docType_s\", \"citationFull_s\",\n    \"citationRef_s\", \"publicationDate_tdate\", \"authFullNamePersonIDIDHal_fs\", add_outputs\n  )\n  filters &lt;- list(\n    docType_s = c(\"COMM\", \"ART\", \"OUV\", \"COUV\", \"DOUV\", \"POSTER\", \"SOFTWARE\", \"THESE\", \"HDR\")\n  )\n  filters[names(add_filters)] &lt;- add_filters\n  \n  exclusions &lt;- list()\n  exclusions[names(add_exclusions)] &lt;- add_exclusions\n  # ---------------------------------------------------------------------------\n  \n  # Url start\n  if (online) {\n    start_query &lt;- \"https://hal.archives-ouvertes.fr/search/index/?\"\n  } else {\n    start_query &lt;- paste0(\n      \"https://api.archives-ouvertes.fr/search/hal/\", # API HAL\n      \"?omitHeader=true\",                             # header ommited\n      \"&wt=\", format[[1]], \"&\"                        # csv, bibtex, ...\n    )\n  }\n  if (grouped) {\n    date_query &lt;- query_date_grouped_parsing(\n      id = id,\n      type_id = type_id,\n      date_min = date_min,\n      date_max = date_max,\n      online = online\n    )\n  } else {\n    date_query &lt;- query_date_ungrouped_parsing(\n      id = id,\n      type_id = type_id,\n      date_min = date_min,\n      date_max = date_max,\n      online = online\n    )\n  }\n  \n  filter_query &lt;- query_filter_parsing(\n    filters = filters, exclusions = exclusions,\n    online = online\n  )\n  if (thesis_strict & !online) {\n    add &lt;- \"&fq=NOT+(docType_s:(THESE+OR+HDR)+AND+submitType_s:(notice+OR+annex))\"\n  } else {\n    add &lt;- \"\"\n  }\n  \n  sorting_query &lt;- query_sort_parsing(sorted_by = sorted_by)\n  output_query &lt;- query_output_parsing(\n    outputs = outputs, n_row = maxrows,\n    online = online\n  )\n  obj &lt;- list(\n    urls = paste0(\n      start_query,\n      date_query,\n      filter_query,\n      add,\n      sorting_query,\n      output_query\n    ) %&gt;%\n      utils::URLencode(),\n    description = list(\n      idhal = id,\n      date_min = date_min,\n      date_max = date_max,\n      outputs = outputs,\n      format = format[[1]],\n      grouped = grouped,\n      maxrows = maxrows,\n      filters = filters,\n      exclusions = exclusions,\n      outputs = outputs,\n      sorted_by = sorted_by,\n      thesis_strict = thesis_strict\n    )\n  )\n  class(obj) &lt;- \"halUrl\"\n  return(obj)\n}\n\n\n\n1.6.6 Script_R_reseau_co-auteur\n\n#### ------------------- Creation of a co-authors graph ------------------- ####\n\n#### --------- First part : Data extraction and cleaning\n\npublication_id_struc &lt;- publication_id_struc %&gt;%\n  mutate(Publication_Year = substr(publicationDate_tdate, 1, 4))\n\nfor (i in seq_along(publication_id_struc$structHasAlphaAuthIdHalPersonid_fs)) {\n  publication_id_struc$structHasAlphaAuthIdHalPersonid_fs[i] &lt;- gsub(\"\\\\\\\\\", \"\", publication_id_struc$structHasAlphaAuthIdHalPersonid_fs[i])\n}\n\n# extraction of info on the authors\ndata_graph_authors &lt;- publication_id_struc %&gt;%\n  select(halId_s, Publication_Year, authFullNamePersonIDIDHal_fs) %&gt;%\n  separate_rows(authFullNamePersonIDIDHal_fs, sep = \",\") %&gt;%\n  separate(authFullNamePersonIDIDHal_fs, into = c(\"Full_Name\", \"Person_ID\", \"idhal\"), sep = \"_FacetSep_\", fill = \"right\") %&gt;%\n  mutate(across(c(Full_Name, Person_ID, idhal), as.character)) %&gt;%\n  mutate(Person_ID = ifelse(Person_ID == \"0\", NA, Person_ID))\n\n# extraction of info on which authors belongs to which structure at the times of the publications\ndata_graph_author_struc &lt;- publication_id_struc %&gt;%\n  select(structHasAlphaAuthIdHalPersonid_fs) %&gt;%\n  separate_rows(structHasAlphaAuthIdHalPersonid_fs, sep = \"_AlphaSep_\") %&gt;%\n  separate(structHasAlphaAuthIdHalPersonid_fs, into = c(\"id_name_struc\", \"id_full_name\"), sep = \"_JoinSep_\") %&gt;%\n  separate(id_full_name, into = c(\"idhal_s\", \"Person_ID\", \"Full_Name\"), sep = \"_FacetSep_\", fill = \"right\") %&gt;%\n  separate(id_name_struc, into = c(\"id_struc\" , \"name_struc\"), sep = \"_FacetSep_\", fill = \"right\")  %&gt;%\n  separate(Full_Name, into = c(\"Full_Name\", \"First_Letter\"), sep = \",\" , fill = \"right\") %&gt;%\n  mutate(Person_ID = ifelse(Person_ID == \"0\", NA, Person_ID))\n## data_graph_author_struc &lt;- find_inconsistent_names_and_ids(data_graph_author_struc)\ndata_graph_authors &lt;- find_inconsistent_names_and_ids(data_graph_authors)\ndata_graph_authors &lt;- merge(data_graph_authors, data_graph_author_struc[, c(\"Person_ID\", \"id_struc\")], by = \"Person_ID\", all.x = TRUE)\n\n\n# Creation of false ids only for authors without Person_ID\n# addind a mark to know which one were created and which were not\ndata_graph_authors$False_id_mark &lt;- !is.na(data_graph_authors$Person_ID)\nunique_authors_without_id_vec &lt;- unique(data_graph_authors$Full_Name[which(data_graph_authors$False_id_mark== FALSE)]) ##%&gt;%\n  ##distinct(Full_Name, .keep_all = TRUE) ##%&gt;%\n  ##filter(is.na(Person_ID))\n\n# to create my own ids\ncreation_id &lt;- function(unique_authors_no_id_name_column) {\n  ids &lt;- character(length(unique_authors_no_id_name_column))  \n  count &lt;- 0\n  for (i in 1:length(unique_authors_no_id_name_column)) {\n    count &lt;- count + 1\n    ids[i] &lt;- count  \n  }\n  return(ids)\n}\nunique_authors_without_id &lt;- data.frame(Full_Name=unique_authors_without_id_vec)\nunique_authors_without_id$False_Id = creation_id(unique_authors_without_id$Full_Name)\n\n# delete lines where False_Id equals Person_ID\n# i lose info here but one person out of a thousands seems ok (to be tested)\nunique_authors_without_id &lt;- unique_authors_without_id %&gt;%\n  filter(!False_Id %in% data_graph_authors$Person_ID)\n  \n         \n# give a false id to all authors without person id\ndata_graph_authors &lt;- data_graph_authors %&gt;%\n  left_join(unique_authors_without_id %&gt;% select(Full_Name, False_Id), by = \"Full_Name\") %&gt;%\n  mutate(Person_ID = ifelse(is.na(Person_ID), False_Id, Person_ID)) %&gt;%\n  select(-False_Id, -idhal)\n\n\n#### --------- Second part : Constructing and visualizing networks \n\n# Creating the \"edge list\" and the \"node list\"\n## To do so we first create the contingence matrix, and then we applied the melt function\ncontingence_table = data_graph_authors %&gt;%\n  count(as.numeric(Person_ID), halId_s) %&gt;%\n  dplyr::select(- n) %&gt;% table %&gt;% as.matrix\ncontingence_matrix = contingence_table %*% t(contingence_table)\ncontingence_matrix[lower.tri(contingence_matrix)] = 1000 # We set 1000 in order to applied a filter later on (in order to avoid duplication with the melt function)\nmelt_matrix = melt(contingence_matrix);   colnames(melt_matrix) = c(\"from\", \"to\", \"value\")\nedge_list = melt_matrix %&gt;% filter(from != to & !value %in% c(0, 1000) ) %&gt;% rename(width = value)\nnode_list = melt_matrix %&gt;% filter(from == to) %&gt;% dplyr::select(- to) %&gt;% rename(id = from) %&gt;% mutate(label = id)\n\n# Creating a group variable in the node_list in order to set differents colors corresponding with the different years\ndata_graph_authors$Publication_Year &lt;- as.numeric(as.character(data_graph_authors$Publication_Year))\ndf_group = data_graph_authors %&gt;% \n  summarise(group = as.character (floor (mean (Publication_Year))), .by = Person_ID) %&gt;% rename (id = Person_ID)\nnode_list$id &lt;- as.character(node_list$id)\nnode_list = node_list %&gt;%\n  left_join (df_group, by = \"id\") \n\n# Defining nodes and edges that will serve to build a legend for edges and nodes sizes (number of publications), and colors (years)\nrange_year = range (data_graph_authors$Publication_Year)\nnode_size = data.frame(id = c(\"A\", \"B\", \"C\"), value = c(1, 6, 15), label = c(\"A\", \"B\", \"C\"), group = \"Number of publications\")\nedge_size = data.frame(from = c(\"A\", \"B\", \"C\"), to = c(\"B\", \"C\", \"A\"), width = c(1, 6, 15), label = c(\"1\", \"6\", \"15\"))\nnode_colors = data.frame (id = as.character (range_year), value = 1, label = as.character (range_year), group = as.character (range_year))\nedge_colors = data.frame (from = as.character (range_year), to = as.character (range_year[c(2, 1)]), width  = 1, label = \"\")\nnode_list = rbind (node_list, node_size, node_colors)\nedge_list = rbind (edge_list %&gt;% mutate (label = \"\"), edge_size, edge_colors)\nedge_list = edge_list %&gt;% mutate(size = 20)\n\n# Defining colors for Publication year\ndf_col = data.frame (\n  group = as.character (c (range_year[1] : range_year[2])),\n  color = colorRampPalette (colors = c (\"#35B779FF\", \"#FDE725FF\")) (range_year[2] - range_year[1] + 1)\n)\nnode_list = node_list %&gt;%\n  left_join (df_col, by = \"group\")\n\n# Legend nodes \n# Defining colors for Publication year\ndf_col_Legend = data.frame (\n  label = as.character (c (range_year[1] : range_year[2])),\n  group = as.character (c (range_year[1] : range_year[2])),\n  color = colorRampPalette (colors = c (\"#35B779FF\", \"#FDE725FF\")) (range_year[2] - range_year[1] + 1))\n\n# legend additional information table\nnode_info &lt;- data.frame(\n  id = c(\"A\", \"B\", \"C\"),\n  info = c(\"Additional info for node A\", \"Additional info for node B\", \"Additional info for node C\")\n)\n\n# Join node_info with node_list to add the title column to the legend nodes\nnode_list &lt;- node_list %&gt;%\n  left_join(node_info, by = \"id\") %&gt;%\n  mutate(title = ifelse(!is.na(info), info, \"\")) %&gt;%\n  select(-info) # remove the info column after using it to create the title\n\n# Convert idhal to character type\ncleaned_table &lt;- cleaned_table %&gt;%\n  mutate(idhal = as.character(idhal))\n\n tmp2 &lt;- data_graph_authors[data_graph_authors$Person_ID %in% node_list$id,]\n node_info2 &lt;- tmp2 %&gt;%\n  select(Full_Name, Person_ID) %&gt;%\n  rename(id = Person_ID) \n \n # Constructing node_info3\n tmp3 &lt;- cleaned_table[cleaned_table$idhal %in% node_list$id,]\n node_info3 &lt;- tmp3 %&gt;%\n  select(idhal, nom, prenom, unite, equipe) %&gt;%\n  rename(id = idhal) \n\n# Joining node_info2 with node_list to add the title column\nnode_list &lt;- node_list %&gt;%\n  left_join(node_info2, by = \"id\") %&gt;%\n  mutate(title_info = ifelse(!is.na(Full_Name), paste(\"Name:\", Full_Name,\",\", \"numeric idHal:\", id), NA),\n         title = ifelse(title == \"\", title_info, title))\n\n# Joining node_info3 with node_list to add the title column\nnode_list &lt;- node_list %&gt;%\n  left_join(node_info3, by = \"id\") %&gt;%\n  mutate(title_info = ifelse(!is.na(nom), paste(\"Name:\", paste(nom, prenom), \",\", \"Team:\", equipe, \",\", \"Unit:\", unite, \",\" , \"numeric idHal:\", id), title_info)) %&gt;%\n  mutate(title = if_else(!is.na(nom), title_info, title)) %&gt;%\n  select(-title_info)\n\nnode_list &lt;- node_list %&gt;% distinct(node_list$id, .keep_all = TRUE)\n\n# Network visualization\nvisNetwork(node_list, edge_list, width = \"100%\") %&gt;%\n  visIgraphLayout() %&gt;%\n  visGroups(groupname = \"Number of publications\", color = \"lightblue\", font = list(size = 22)) %&gt;%\n  visLegend(addNodes = df_col_Legend, main = \"Graph of co-authors\", useGroups = FALSE) %&gt;%\n  visEdges(font = list(size = 22)) %&gt;%\n  visOptions(selectedBy = \"equipe\") %&gt;% \n  visExport( type = \"jpeg\", name = \"Full_Network_Co-authors_Example_managHAL\", label = \"Export as jpeg\")\n\n```\n\n\n1.6.7 Tableau des résultats détaillés\nVoici les tableaux des résultats détaillés pour les différentes méthodes et tests effectués.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  },
  {
    "objectID": "index.html#bibliographie",
    "href": "index.html#bibliographie",
    "title": "Mémoire de Stage - Package ManagHAL",
    "section": "1.7 BIBLIOGRAPHIE",
    "text": "1.7 BIBLIOGRAPHIE\n\n\n\n\nAgroParisTech. 2024. “Science Ouverte.” https://www.agroparistech.fr/recherche/science-ouverte.\n\n\nAllaire, JJ, and Christophe Dervieux. 2024. “Quarto: R Interface to ’Quarto’ Markdown Publishing System.” https://CRAN.R-project.org/package=quarto.\n\n\nAubert, J., P. Barbillon, S. Donnet, and V. Miele. 2022. Using Latent Block Models to Detect Structure in Ecological Networks. Wiley. https://doi.org/10.1002/9781119902799.ch6.\n\n\nBache, Stefan Milton, and Hadley Wickham. 2022. “Magrittr: A Forward-Pipe Operator for r.” https://CRAN.R-project.org/package=magrittr.\n\n\nBengtsson, Henrik. 2021. “A Unifying Framework for Parallel and Distributed Processing in r Using Futures” 13. https://doi.org/10.32614/RJ-2021-048.\n\n\nBouchet-Valat, Milan. 2023. “SnowballC: Snowball Stemmers Based on the c ’Libstemmer’ UTF-8 Library.” https://CRAN.R-project.org/package=SnowballC.\n\n\nChiquet, Julien, Sophie Donnet, and Pierre Barbillon. 2024. “Sbm: Stochastic Blockmodels.” https://CRAN.R-project.org/package=sbm.\n\n\nComité d’orientation du CCSD & Assemblée des partenaires HAL, Comité de pilotage et. 2022. “HAL, Archive Ouverte Construite En Commun Pour Partager Et Diffuser La Connaissance Scientifique.” https://www.ccsd.cnrs.fr/wp-content/uploads/2023/01/DeclarationPolitiqueFR_VF.pdf.\n\n\n“Documentation API-HAL.” n.d. https://api.archives-ouvertes.fr/docs/search/?#q.\n\n\nFeinerer, Ingo, and Kurt Hornik. 2024. “Tm: Text Mining Package.” https://CRAN.R-project.org/package=tm.\n\n\nFellows, Ian. 2018. “Wordcloud: Word Clouds.” https://CRAN.R-project.org/package=wordcloud.\n\n\nIzrailev, Sergei. 2024. “Tictoc: Functions for Timing r Scripts, as Well as Implementations of \"Stack\" and \"StackList\" Structures.” https://CRAN.R-project.org/package=tictoc.\n\n\nLJonchere, C. et al. n.d. “ExtrHAL - HALUR.” https://halur1.univ-rennes1.fr/ExtrHAL.php.\n\n\nOoms, Jeroen. 2023. “Askpass: Password Entry Utilities for r, Git, and SSH.” https://CRAN.R-project.org/package=askpass.\n\n\nPremraj, Rahul. 2021. “mailR: A Utility to Send Emails from r.” https://CRAN.R-project.org/package=mailR.\n\n\nVaughan, Davis, and Matt Dancho. 2022. “Furrr: Apply Mapping Functions in Parallel Using Futures.” https://CRAN.R-project.org/package=furrr.\n\n\nWickham, Hadley. 2016. “Ggplot2: Elegant Graphics for Data Analysis.” https://ggplot2.tidyverse.org.\n\n\n———. 2023. “Stringr: Simple, Consistent Wrappers for Common String Operations.” https://CRAN.R-project.org/package=stringr.\n\n\n———. 2024. “Rvest: Easily Harvest (Scrape) Web Pages.” https://CRAN.R-project.org/package=rvest.\n\n\nWickham, Hadley, and Jennifer Bryan. 2023. “Readxl: Read Excel Files.” https://CRAN.R-project.org/package=readxl.\n\n\nWickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. “Dplyr: A Grammar of Data Manipulation.” https://CRAN.R-project.org/package=dplyr.\n\n\nWickham, Hadley, and Lionel Henry. 2023. “Purrr: Functional Programming Tools.” https://CRAN.R-project.org/package=purrr.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>MANAGHAL, DONNEES BIBLIOMETRIQUES, RESEAUX ET ANALYSES STATISTIQUES DE RESEAUX</span>"
    ]
  }
]